{% extends "base.html" %}

{% block title %}Задачи — Customs Tracker{% endblock %}

{% block content %}
<div class="mb-6">
    <h1 class="text-ink text-[17px] font-medium tracking-[-0.01em]">Задачи</h1>
</div>

<!-- Filter tabs -->
<div class="flex flex-wrap gap-1.5 mb-6 pb-4 border-b border-sand-300/60">
    {% set filters = [
        ("active", "Активные"),
        ("all", "Все"),
        ("draft", "Черновик"),
        ("awaiting_confirmation", "Ожидает"),
        ("processing", "В работе"),
        ("finished", "Отснято"),
        ("delivered", "Выполнено"),
        ("cancelled", "Отменено"),
        ("overdue", "Просроченные"),
    ] %}
    {% for key, label in filters %}
    <button
        class="px-3 py-1.5 rounded-lg text-[13px] transition-colors
               {% if current_filter == key %}bg-ink text-sand-50 font-medium
               {% else %}text-ink-tertiary hover:text-ink-secondary hover:bg-sand-200/60{% endif %}"
        hx-get="/htmx/tasks?status={{ key }}"
        hx-target="#task-grid-container"
        hx-swap="innerHTML"
        hx-push-url="/tasks?status={{ key }}"
        onclick="document.querySelectorAll('[hx-get^=\'/htmx/tasks\']').forEach(b => {
            b.className = 'px-3 py-1.5 rounded-lg text-[13px] transition-colors text-ink-tertiary hover:text-ink-secondary hover:bg-sand-200/60';
        });
        this.className = 'px-3 py-1.5 rounded-lg text-[13px] transition-colors bg-ink text-sand-50 font-medium';"
    >
        {{ label }}
    </button>
    {% endfor %}
</div>

<!-- Task grid -->
<div id="task-grid-container">
    {% include "partials/task_grid.html" %}
</div>
{% endblock %}
